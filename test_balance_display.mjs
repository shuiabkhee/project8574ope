import fetch from 'node-fetch';

const token = "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImQwa2ctZl83LVFfVFM2YnltMmNPTmlyWnc1NU9hSHczc0d2dGRJSWVMa28ifQ.eyJzbWFydFdhbGxldENhbGxzIjpbeyJ0byI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsImNhbGxEYXRhIjoiMHg2YzkzMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxNjRmYzY5ZTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMzY1ZDcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIn0seyJ0byI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsImNhbGxEYXRhIjoiMHg0ODMwN2Y5ODAwMDAwMDAwMDAwMDAwMDAwZGIyMjEyNDdjYzBhOTA0NmE3YjkxODhjZThkNzQxY2YwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDZkMDAifSx7InRvIjoiMHgzMzYyNmFmQWFiQzJGRjZhQkM3NzIwOTkwODhDMEY3MjUyQmZkNzlGIiwiY2FsbERhdGEiOiIweDQ4MzA3Zjk4MDAwMDAwMDAwMDAwMDAwMDAzMjY0OThlNzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDE2ZDAzIn0seyJ0byI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsImNhbGxEYXRhIjoiMHg0ODMwN2Y5ODAwMDAwMDAwMDAwMDAwMDAyN2I1ZjcxODAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEzYzYwIn0seyJ0byI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsImNhbGxEYXRhIjoiMHg0ODMwN2Y5ODAwMDAwMDAwMDAwMDAwMDA0ZTY4MzAwOTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEzNzEwIn0seyJ0byI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsImNhbGxEYXRhIjoiMHg0ODMwN2Y5ODAwMDAwMDAwMDAwMDAwMDBhYjNhYjI2YjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxOWNmNjAifV0sImN1c3RvbUNsYWltcyI6eyJzZWNhXzBfMjQwMzI4Ijp7IkJhc2VTZWNHZXN0b3NXYWxsZXRBZGRyZXNzIjoiMHgzMzYyNmFmQWFiQzJGRjZhQkM3NzIwOTkwODhDMEY3MjUyQmZkNzlGIiwiQmFzZVNlY0hhc1dpdGhkcmF3biI6dHJ1ZSwiQmFzZVN0YWtlSW1wIjoiMHg1MzZhZTc0NjMzNzYyNzQzNWI2ZTc3ZTExZDhhZjBjMDhmZDQ0YzQzIiwiQmFzZVN0YWtlTG9ja1BlcmlvZCI6IjAiLCJCYXNlU3Rha2VFbWJlZGRlZEFtb3VudHMiOiI0OTAwMDAwMDA6MzAwMDAwMDAwLDMyMzAwMDAwOjQyMDAwMDAwIiwiRXRoU2VjR2VzdG9zV2FsbGV0QWRkcmVzcyI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsIkV0aFNlY0hhc1dpdGhkcmF3biI6dHJ1ZSwiRXRoU3Rha2VJbXAiOiIweDA2MDhjNDdjYzY0NzlGZjE2OEM4YTc3Yzk1ODAwNzQ0NDA5QjQyQjMiLCJFdGhTdGFrZUxvY2tQZXJpb2QiOiIwIiwiRXRoU3Rha2VFbWJlZGRlZEFtb3VudHMiOiIiLCJQb2x5Z29uU2VjR2VzdG9zV2FsbGV0QWRkcmVzcyI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsIlBvbHlnb25TZWNIYXNXaXRoZHJhd24iOmZhbHNlLCJQb2x5Z29uU3Rha2VJbXAiOiIweGQ2MGE4ZjAzYzBhZDQ0N2I5ZDY4ODJiMWU5NmMxMDAwMGIzZTk5MzYiLCJQb2x5Z29uU3Rha2VMb2NrUGVyaW9kIjoiMzAiLCJQb2x5Z29uU3Rha2VFbWJlZGRlZEFtb3VudHMiOiI0OTAwMDAwMDA6OTAwMDAwMDAwLDMyMzAwMDAwOjE4MDAwMDAwMCIsIkFyYml0cnVtU2VjR2VzdG9zV2FsbGV0QWRkcmVzcyI6IjB4MzM2MjZhZkFhYkMyRkY2YUJDNzcyMDk5MDg4QzBGNzI1MkJmZDc5RiIsIkFyYml0cnVtU2VjSGFzV2l0aGRyYXduIjpmYWxzZSwiQXJiaXRydW1TdGFrZUltcCI6IjB4MTYzMDhBN2QxRWFGNzEyQkFDOEU5NjczOWU3RkM0MUU0OTM4NkRENCIsIkFyYml0cnVtU3Rha2VMb2NrUGVyaW9kIjoiMCIsIkFyYml0cnVtU3Rha2VFbWJlZGRlZEFtb3VudHMiOiIifX0sImV4cCI6MTczNzMxNDI1MHsiaWF0IjoxNzM3MzEwNjUwLCJpc3MiOiJzY2FsYXItcHJpdnkifQ.t7RTqMHFLN0ViHWnYV07KdH0tPl8xOWIQB4ylO0e3_3D4Ur9S4w_hKdaBZvvgOtc2iw5BdNWFcEkbCNUkfZm0g";

console.log("üîç Testing Points Balance API\n");
console.log("Endpoint: GET /api/points/balance/did:privy:cmk2cxona01r4jo0d5v22cqy4");
console.log("Status: Starting test...\n");

try {
  const response = await fetch("http://localhost:5000/api/points/balance/did:privy:cmk2cxona01r4jo0d5v22cqy4", {
    headers: {
      "Authorization": `Bearer ${token}`
    }
  });

  if (response.ok) {
    const data = await response.json();
    console.log("‚úÖ API Response Received");
    console.log("Status Code:", response.status);
    console.log("\nüìä Data Structure:");
    console.log(JSON.stringify(data, null, 2));
    
    // Check what the frontend will display
    if (data.balance !== undefined) {
      console.log("\nüí∞ Frontend Will Display:");
      console.log(`   Bantah Points: ${data.balance}`);
      if (data.balance > 0) {
        console.log("   ‚úÖ Balance is NON-ZERO - frontier should display correctly!");
      } else {
        console.log("   ‚ö†Ô∏è  Balance is still ZERO - issue persists");
      }
    }
  } else {
    console.log(`‚ùå API Error: ${response.status}`);
    const text = await response.text();
    console.log(text);
  }
} catch (e) {
  console.log("‚ùå Connection Error:", e.message);
  console.log("   Make sure servers are running on port 5000");
}
