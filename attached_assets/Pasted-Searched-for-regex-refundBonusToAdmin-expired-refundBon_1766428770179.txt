Searched for regex refundBonusToAdmin.*expired|refundBonusToAdmin.*draw|refundBonusToAdmin.*cancelled, 6 results

Excellent! All four scenarios are properly implemented:

✅ Challenge Expires: pairingEngine.ts - refundBonusToAdmin(..., 'expired')
✅ Challenge Cancelled: storage.ts - refundBonusToAdmin(..., 'cancelled')
✅ Challenge Draw: storage.ts - refundBonusToAdmin(..., 'draw')
✅ Challenge Won: storage.ts - No refund (bonus kept as deduction)

The implementation is complete and ready for use. All bonus refund scenarios have been properly implemented with:
- Transaction logging for audit trail
- Admin wallet updates
- User notifications
- Proper error handling
- Full documentation

Made changes.

User: now, lets work on the telegram posts,  - Events gets posted on Telegram channel and Group. Which works very well. Now, let's do the same for challenges. (Admin created Challemge and p2p challnges) They shoild be posted in our telegram group/channel too.

GitHub Copilot: Created 5 todos

Let me search for how events are being posted to Telegram: 

Searched for regex telegram.*event|event.*telegram|sendMessage.*event|postEvent, 20 results

Let me search more specifically for the telegram service or bot implementation: 

Searched for files matching **/telegram*.ts, 7 matches

Read [](file:///workspaces/56789765tyghyui67/server/telegramBot.ts#1-1), lines 1 to 100

Searched for regex broadcastEvent|postEvent|sendEvent, 3 results

Good! Let me see the broadcastEvent implementation and then look at where it's called: 

Read [](file:///workspaces/56789765tyghyui67/server/telegramBot.ts#506-506), lines 506 to 650

Perfect! The broadcastChallenge method already exists. Now let me check the format method and see where events are being called in routes: 

Searched for regex formatChallengeMessage|formatEventMessage, 4 results

Read [](file:///workspaces/56789765tyghyui67/server/telegramBot.ts#189-189), lines 189 to 350

Excellent! The infrastructure is already there. Now let me check where events are being broadcasted in the routes to see how they're integrated: 

Read [](file:///workspaces/56789765tyghyui67/server/routes.ts#795-795), lines 795 to 850

Perfect! Now let me find where admin challenges are created: 

Searched for regex createAdminChallenge|/api/admin/challenges.*POST, 20 results

Searched for regex app.post.*admin.*challenges, 5 results

Read [](file:///workspaces/56789765tyghyui67/server/routes.ts#3834-3834), lines 3834 to 3950

Now let me check for regular P2P challenge creation: 

Searched for regex app.post.*challenges.*create|app.post.*challenges['\"].*PrivyAuth, 1 result

Read [](file:///workspaces/56789765tyghyui67/server/routes.ts#1496-1496), lines 1496 to 1620

Perfect! I can see that P2P challenges are already being broadcasted to Telegram at line 1588. Now I need to add the same functionality for admin challenges. Let me update the admin challenge creation endpoint: 

Starting: *Integrate posting for admin challenges* (3/5)

Now let me check the full admin challenge creation endpoint to find the best place to add the Telegram broadcast: 

Read [](file:///workspaces/56789765tyghyui67/server/routes.ts#3920-3920), lines 3920 to 3980

Perfect! Now I'll add the Telegram broadcast for admin challenges. Let me add it to the admin challenge creation endpoint: 

Using "Replace String in File"



Great! Now let me verify the changes and update the todo list: 

Starting: *Test Telegram posting functionality* (5/5)

Now let me create a comprehensive documentation for this feature: 

Created [](file:///workspaces/56789765tyghyui67/TELEGRAM_CHALLENGES_BROADCAST.md)

Perfect! Now let me verify the implementation by checking both endpoints one more time to ensure everything is correct: 

Read [](file:///workspaces/56789765tyghyui67/server/routes.ts#3935-3935), lines 3935 to 3975

Excellent! Let me verify the P2P challenge endpoint as well: 

Read [](file:///workspaces/56789765tyghyui67/server/routes.ts#1575-1575), lines 1575 to 1610